int*upper;
int upperSz;
bool*wixoss;

void fill(int*arr,int sz, int val){
  for(int i=0;i<sz;i++)
    arr[i]=val;
}
void newDJSet(int n){
    upperSz = n;
    upper = calloc(n, sizeof(int));
    fill(upper, n, -1);
    wixoss = calloc(n, sizeof(bool));
}
int root(int x){
    return upper[x] < 0 ? x : (upper[x] = root(upper[x]));
}
bool equiv(int x, int y){
    return root(x) == root(y);
}
bool Union(int x, int y){
    x = root(x);
    y = root(y);
    if(x != y){
        if(upper[y] < upper[x]) {
            int d = x;
            x = y;
            y = d;
        }
        upper[x] += upper[y];
        upper[y] = x;
        wixoss[x] |= wixoss[y];
    }
    return x == y;
}
int count(){
    int ct = 0;
    for(int z=0;z<upperSz;z++){int u = upper[z];
        if(u < 0)
            ct++;
    }
    return ct;
}
int minMalwareSpread(int**g, int gSz, int*g0sz, int*initial, int initialSz){
    int n = gSz;
    bool inf[n]; memset(inf, 0, sizeof(inf));
    for(int z=0;z<initialSz;z++){int v = initial[z];
        inf[v] = true;
    }
    int min = 9999999;
    int arg = -1;
    for(int i = 0; i < n; i++){
        if(inf[i]){
            newDJSet(n);
            for(int j = 0;j < n;j++){
                if(inf[j] && j != i)
                    wixoss[j] = true;
            }
            for(int j = 0; j < n; j++){
                for(int k = 0; k < n; k++){
                    if(g[j][k] == 1)
                        Union(j, k);
                }
            }
            int ninf = 0;
            for(int j = 0; j < n; j++){
                if(upper[j] < 0 && wixoss[j]){
                    ninf += -upper[j];
                }
            }
            if(ninf < min){
                min = ninf;
                arg = i;
            }
        }
    }
    return arg;
}
